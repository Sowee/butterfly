!function(a){a.fn.butterfly=function(b){var c={defaultNameClass:"",butterflyAnimation:"none",smartTransition:!0},d=a.extend(c,b);return this.each(function(){function b(){a(g).css({position:"",top:"",left:"",right:"","margin-top":"",height:"","padding-top":"","padding-bottom":""}),"lineAnimation"===d.butterflyAnimation&&a(g).css({overflow:""}),d.smartTransition===!0&&("hiddenAnimation"===d.butterflyAnimation?e("all","0"):e("all","0"))}function c(b,c){a(g).css({position:"fixed",top:b,left:"0px",right:"0px","margin-top":"0px",height:c,"padding-top":"","padding-bottom":""}),"lineAnimation"===d.butterflyAnimation&&a(g).css({overflow:"hidden"}),d.smartTransition===!0&&("hiddenAnimation"===d.butterflyAnimation?e("all","0.4"):"lineAnimation"===d.butterflyAnimation?e("height","0.4"):e("all","0"))}function e(b,c){a(g).css({transition:b+" "+c+"s ease-in-out"})}function f(){b(),h=a(g).outerHeight(!0),i=a(g).offset().top,j=a(".butterfly-wrap").css({position:"relative",height:h+"px",width:"100%",overflow:"hidden"}),i>a(document).scrollTop()?b():"hiddenAnimation"===d.butterflyAnimation?c("-"+h+"px",""):"lineAnimation"===d.butterflyAnimation?c("0px","2px"):c("0px",""),d.smartTransition===!0&&e("all",0)}var g=a(this).wrap('<div class="butterfly-wrap"></div>'),h=a(g).outerHeight(!0),i=a(g).offset().top,j=a(".butterfly-wrap").css({position:"relative",height:h+"px",width:"100%",overflow:"hidden"}),k=a(document).scrollTop(),l=!1,m=!0,n=!0,o=!0,p=!0;i>a(document).scrollTop()?b():c(),a(window).resize(function(){f()}),a(window).scroll(function(e){return a(document).scrollTop()>i+h?(a(document).scrollTop()>=k?p===!0&&("hiddenAnimation"===d.butterflyAnimation?(console.log("[01] hidden: FIXED CACHE"),c("-"+h+"px","")):"lineAnimation"===d.butterflyAnimation?(console.log("[01] line : FIXED AND HEIGHT : 2px;"),c("0px","2px")):(console.log("[01] Normal : STILL FIXED ;"),c("0px","")),m=!0,n=!0,o=!0,p=!1):n===!0&&(console.log("[02] Scroll remonte ; Normal : STILL FIXED ; Hidden : STILL FIXED show;  FIXED AND SHOW (NORMAL HEIGHT);"),c("0px",""),n=!1,m=!0,o=!0,p=!0),l=!0):a(document).scrollTop()>i?a(document).scrollTop()>=k&&a(document).scrollTop()>=i?n===!0&&("hiddenAnimation"===d.butterflyAnimation?l===!0?(console.log("[03] hidden : FIXED cache;"),c("-"+h+"px","")):(console.log("[04] Hidden : NOT FIXED YET;"),b()):"lineAnimation"===d.butterflyAnimation?(console.log("[03] line : FIXED AND HEIGHT : 2px;"),c("0px","2px")):(console.log("[03] Normal : FIXED"),c("0px","")),n=!1,o=!0,m=!0,p=!0):o===!0&&("hiddenAnimation"===d.butterflyAnimation?l===!0?(console.log("[05] Hidden : STILL FIXED show; "),c("0px","")):(console.log("[06] Hidden : NOT FIXED; "),b()):(console.log("[05] Normal : STILL FIXED ; line : FIXED AND SHOW (NORMAL HEIGHT);"),c("0px","")),o=!1,m=!0,n=!0,p=!0):m===!0&&(b(),console.log("[0]Scroll au dessus de l'element"),l=!1,m=!1,o=!0,n=!0,p=!0),k=a(document).scrollTop(),e.stopPropagation(),!1})})}}(jQuery);